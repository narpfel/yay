# TODO: Better name for `signature_contents`.
# TODO: Should there be the ability to specify valid values? Pro: More
# information in config file rather than in code. Con: How to specify complex
# values such as `Register` objects or (esp. for `direct`) the possibility for
# both integers *and* register objects?
signature_contents:
    direct:
        length: 8
        short: null
    register:
        length: 3
        short: "r"
    indirect:
        length: 1
        short: "i"
    immediate:
        length: 8
        short: null
    relative:
        length: 8
        short: null
    addr11:
        length: 11
        short: "a"
    accu:
        length: 0
        short: null
    dptr:
        length: 0
        short: null
    indirect_dptr:
        length: 0
        short: null
    # The result of `at(A + DPTR)`
    dptr_offset:
        length: 0
        short: null
    # The result of `at(A + PC)`
    pc_offset:
        length: 0
        short: null
    # And so on...
mnemonics:
    ACALL:
        - signature: ["addr11"]
          opcode:
              - ["a10", "a9", "a8", 1, 0, 0, 0, 1]
              - ["a7", "a6", "a5", "a4", "a3", "a2", "a1", "a0"]
    ADD:
        - signature: ["direct"]
          opcode:
              - [0b0010_0101]
              - ["direct"]
        - signature: ["register"]
          opcode:
              - [0, 0, 1, 0, 1, "r2", "r1", "r0"]
        - signature: ["indirect"]
          opcode:
              - [0, 0, 1, 0, 0, 1, 1, "i0"]
        - signature: ["immediate"]
          opcode:
            - [0b0010_0100]
            - ["immediate"]
    ADDC:
        - signature: ["direct"]
          opcode:
              - [0b0011_0101]
              - ["direct"]
        - signature: ["register"]
          opcode:
              - [0, 0, 1, 1, 1, "r2", "r1", "r0"]
        - signature: ["indirect"]
          opcode:
              - [0, 0, 1, 1, 0, 1, 1, "i0"]
        - signature: ["immediate"]
          opcode:
            - [0b0011_0100]
            - ["immediate"]
    AJMP:
        - signature: ["addr11"]
          opcode:
              - ["a10", "a9", "a8", 0, 0, 0, 0, 1]
              - ["a7", "a6", "a5", "a4", "a3", "a2", "a1", "a0"]
              # alternatively: `- ["low(addr11)"]`â€½
    AND:
        - signature: ["direct"]
          opcode:
              - [0b0101_0101]
              - ["direct"]
        - signature: ["register"]
          opcode:
              - [0, 1, 0, 1, 1, "r2", "r1", "r0"]
        - signature: ["indirect"]
          opcode:
              - [0, 1, 0, 1, 0, 1, 1, "i0"]
        - signature: ["direct", "immediate"]
          opcode:
              - [0b0101_0011]
              - ["direct"]
              - ["immediate"]
        - signature: ["direct", "accu"]
          opcode:
              - [0b0101_0010]
              - ["direct"]
        - signature: ["immediate"]
          opcode:
            - [0b0101_0100]
            - ["immediate"]
    CJNE:
        - signature: ["register", "immediate", "relative"]
          opcode:
              - [1, 0, 1, 1, 1, "r2", "r1", "r0"]
              - ["immediate"]
              - ["relative"]
        # TODO!
    CLR:
        - signature: []
          opcode:
              - [0b1110_0100]

registers:
    P0:
        import: "SFR"
        call: ["P0", 0x80]
    SP:
        import: "SFR"
        call: ["SP", 0x81]
    DP0L:
        import: "SFR"
        call: ["DP0L", 0x82]
    DP0H:
        import: "SFR"
        call: ["DP0H", 0x83]
    DP1L:
        import: "SFR"
        call: ["DP1L", 0x84]
    DP1H:
        import: "SFR"
        call: ["DP1H", 0x85]
    SPDR:
        import: "SFR"
        call: ["SPDR", 0x86]
    PCON:
        import: "SFR"
        call: ["PCON", 0x87]
    TCON:
        import: "SFR"
        call: ["TCON", 0x88]
    TMOD:
        import: "SFR"
        call: ["TMOD", 0x89]
    TL0:
        import: "SFR"
        call: ["TL0", 0x8A]
    TL1:
        import: "SFR"
        call: ["TL1", 0x8B]
    TH0:
        import: "SFR"
        call: ["TH0", 0x8C]
    TH1:
        import: "SFR"
        call: ["TH1", 0x8D]
    AUXR:
        import: "SFR"
        call: ["AUXR", 0x8E]
    CLKREG:
        import: "SFR"
        call: ["CLKREG", 0x8F]
    P1:
        import: "SFR"
        call: ["P1", 0x90]
    EECON:
        import: "SFR"
        call: ["EECON", 0x96]
    SCON:
        import: "SFR"
        call: ["SCON", 0x98]
    SBUF:
        import: "SFR"
        call: ["SBUF", 0x99]
    P2:
        import: "SFR"
        call: ["P2", 0xA0]
    WDTRST:
        import: "SFR"
        call: ["WDTRST", 0xA6]
    WDTCON:
        import: "SFR"
        call: ["WDTCON", 0xA7]
    IE:
        import: "SFR"
        call: ["IE", 0xA8]
    SADDR:
        import: "SFR"
        call: ["SADDR", 0xA9]
    SPSR:
        import: "SFR"
        call: ["SPSR", 0xAA]
    P3:
        import: "SFR"
        call: ["P3", 0xB0]
    IPH:
        import: "SFR"
        call: ["IPH", 0xB7]
    IP:
        import: "SFR"
        call: ["IP", 0xB8]
    SADEN:
        import: "SFR"
        call: ["SADEN", 0xB9]
    T2CON:
        import: "SFR"
        call: ["T2CON", 0xC8]
    T2MOD:
        import: "SFR"
        call: ["T2MOD", 0xC9]
    RCAP2L:
        import: "SFR"
        call: ["RCAP2L", 0xCA]
    RCAP2H:
        import: "SFR"
        call: ["RCAP2H", 0xCB]
    TL2:
        import: "SFR"
        call: ["TL2", 0xCC]
    TH2:
        import: "SFR"
        call: ["TH2", 0xCD]
    PSW:
        import: "SFR"
        call: ["PSW", 0xD0]
    SPCR:
        import: "SFR"
        call: ["SPCR", 0xD5]
    ACC:
        import: "SFR"
        call: ["ACC", 0xE0]
    B:
        import: "SFR"
        call: ["B", 0xF0]
    A:
        import: "Accumulator"
        call: []
    R0:
        import: "Register"
        call: [0, true]
    R1:
        import: "Register"
        call: [1, true]
    R2:
        import: "Register"
        call: [2]
    R3:
        import: "Register"
        call: [3]
    R4:
        import: "Register"
        call: [4]
    R5:
        import: "Register"
        call: [5]
    R6:
        import: "Register"
        call: [6]
    R7:
        import: "Register"
        call: [7]
    DPTR:
        import: "DPTR"
        call: []
    PC:
        import: "PC"
        call: []

additional_names:
    at:
        import: "at"
    Byte:
        import: "Byte"

importing:
    additional_names: "yay.cpus.MCS_51"
    registers: "yay.cpus.MCS_51"

all:
    - "mnemonics"
    - "registers"
    - "additional_names"
